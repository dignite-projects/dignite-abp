@using Dignite.Abp.DynamicForms.CkEditor
@using Dignite.Abp.AspNetCore.Components.CkEditor
@inherits FormComponentBase<CkEditorForm,CkEditorConfiguration>

<Field Horizontal="@(!IsChild)">
    <FieldLabel ColumnSize="ColumnSize.Is2.OnDesktop">@Field.DisplayName</FieldLabel>
    <FieldBody ColumnSize="ColumnSize.Is10.OnDesktop">
        <CkEditor @bind-Content="Content" Options="Options" ImagesContainerName="@ImagesContainerName">
            </CkEditor>
        <FieldHelp>@FormConfiguration.Description</FieldHelp>
    </FieldBody>
</Field>

@code {
    private string _content;
    protected string Content
    {
        get
        {
            return _content;
        }
        set
        {
            _content = value;
            CustomizableObject.SetField(Field.Name, value);
        }
    }

    protected string ImagesContainerName
    {
        get
        {
            return FormConfiguration.ImagesContainerName;
        }

    } 

    protected CkEditorOptions Options { get; } = CkEditorOptions.Default;

    protected override void OnInitialized()
    {
        base.OnInitialized();
    }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        _content = CustomizableObject.GetField(Field.Name, FormConfiguration.InitialContent)?.ToString();
    }

}